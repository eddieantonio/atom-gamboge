[{"category": "COMMENT", "text": "#!/usr/bin/env python"}, {"category": "NL", "text": "\n"}, {"category": "STRING", "text": "\"\"\"\nUse the Czech et al. method for generating minimal perfect hashes for strings.\n\"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "import"}, {"category": "NAME", "text": "random"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "import"}, {"category": "NAME", "text": "collections"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "from"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "import"}, {"category": "NAME", "text": "forest"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "from"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "utils"}, {"category": "NAME", "text": "import"}, {"category": "NAME", "text": "create_dict_subclass"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "__all__"}, {"category": "OP", "text": "="}, {"category": "OP", "text": "["}, {"category": "STRING", "text": "'hash_parameters'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'make_hash'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'make_dict'"}, {"category": "OP", "text": "]"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "_info_fields"}, {"category": "OP", "text": "="}, {"category": "OP", "text": "("}, {"category": "STRING", "text": "'t1'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'t2'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'g'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'indices'"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "HashInfo"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "collections"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "namedtuple"}, {"category": "OP", "text": "("}, {"category": "STRING", "text": "'HashInfo'"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "_info_fields"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "class"}, {"category": "NAME", "text": "CzechHashBuilder"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "object"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "INDENT", "text": "    "}, {"category": "STRING", "text": "\"\"\"\n    A helper class that (iteratively) stores all data needed to create a Czech\n    hash.\n\n    The entire hash generation algorithm occurs in  __init__.\n\n    >>> duplicated_input = 'guacala'\n    >>> unique_len = len(set(duplicated_input))\n    >>> info = CzechHashBuilder(duplicated_input)\n    >>> 2 * unique_len <= info.n <= 3 * unique_len\n    True\n    >>> info.trials_taken <= info.n ** 0.5\n    True\n    >>> hf = info.hash_function\n    >>> [hf(x) for x in 'lacug']\n    [4, 2, 3, 1, 0]\n    \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "__init__"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "minimize"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "False"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# Store the words as an immutable sequence."}, {"category": "NL", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "ordered_deduplicate"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# TODO: Index minimization"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "indices"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "range"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "len"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": "["}, {"category": "NUMBER", "text": "0"}, {"category": "OP", "text": "]"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Each of the following steps add fields to `self`:"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Mapping step:"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "#  - n, t1, t2, f1, f2, graph"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "generate_acyclic_graph"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# Assignment step:"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "#  - g"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "assign"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# Now hash_info will return the appropriate object."}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "OP", "text": "@"}, {"category": "NAME", "text": "property"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "hash_info"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "STRING", "text": "\"\"\"\n        HashInfo tuple for the created hash.\n        \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "HashInfo"}, {"category": "OP", "text": "("}, {"category": "OP", "text": "*"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "getattr"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "key"}, {"category": "OP", "text": ")"}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "key"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "_info_fields"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "OP", "text": "@"}, {"category": "NAME", "text": "property"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "hash_function"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "STRING", "text": "\"\"\"\n        Returns the hash function proper. Ensures that `self` is not bound to\n        the returned closure.\n        \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "assert"}, {"category": "NAME", "text": "hasattr"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'f1'"}, {"category": "OP", "text": ")"}, {"category": "NAME", "text": "and"}, {"category": "NAME", "text": "hasattr"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'f2'"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# These are not just convenient aliases for the given"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# attributes; if `self` would creep into the returned closure,"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# that would ensure that a reference to this big, fat object"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# would be kept alive; hence, any hash function would carry"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# around all of the auxiliary state that was created during the"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# generation of the hash parameters.  Omitting `self` ensures"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# this object has a chance to be garbage collected."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "f1"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "f2"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "f1"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "f2"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "g"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "czech_hash"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "word"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "v1"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "f1"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "word"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "v2"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "f2"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "word"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "v1"}, {"category": "OP", "text": "]"}, {"category": "OP", "text": "+"}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "v2"}, {"category": "OP", "text": "]"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "czech_hash"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Algorithm steps."}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "generate_acyclic_graph"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "STRING", "text": "\"\"\"\n        Generates an acyclic graph for the given words.\n        Adds the graph, and a list of edge-word associations to the object.\n        \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Maximum length of each table, respectively."}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Hardcoded n = cm, where c = 3"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# There might be a good way to choose an appropriate C,"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# but [1] suggests the average amount of iterations needed"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# to generate an acyclic graph is sqrt(3)."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "n"}, {"category": "OP", "text": "="}, {"category": "NUMBER", "text": "3"}, {"category": "OP", "text": "*"}, {"category": "NAME", "text": "len"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "max_tries"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "len"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": "**"}, {"category": "NUMBER", "text": "2"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "trial"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "xrange"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "max_tries"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "try"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "                "}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "generate_or_fail"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "except"}, {"category": "NAME", "text": "forest"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "InvariantError"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "                "}, {"category": "NAME", "text": "continue"}, {"category": "NEWLINE", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "else"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# Generated successfully!"}, {"category": "NL", "text": "\n"}, {"category": "INDENT", "text": "                "}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "trials_taken"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "trial"}, {"category": "OP", "text": "+"}, {"category": "NUMBER", "text": "1"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "return"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "raise"}, {"category": "NAME", "text": "RuntimeError"}, {"category": "OP", "text": "("}, {"category": "STRING", "text": "\"Could not generate graph in \""}, {"category": "NL", "text": "\n"}, {"category": "STRING", "text": "\"{} tries\""}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "format"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "max_tries"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "generate_random_table"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "STRING", "text": "\"\"\"\n        Generates random tables for given word lists.\n        \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "table"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "range"}, {"category": "OP", "text": "("}, {"category": "NUMBER", "text": "0"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "n"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "random"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "shuffle"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "table"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "table"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "generate_or_fail"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "STRING", "text": "\"\"\"\n        Attempts to generate a random acyclic graph, raising an\n        InvariantError if unable to.\n        \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "t1"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "generate_random_table"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "t2"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "generate_random_table"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "f1"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "generate_func"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "t1"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "f2"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "generate_func"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "t2"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "edges"}, {"category": "OP", "text": "="}, {"category": "OP", "text": "["}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "f1"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "word"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "f2"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "word"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "word"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": "]"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Try to generate that graph, mack!"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Note that failure to generate the graph here should be caught"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# by the caller."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "graph"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "forest"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "ForestGraph"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "edges"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "edges"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Associate each edge with its corresponding word."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "associations"}, {"category": "OP", "text": "="}, {"category": "OP", "text": "{"}, {"category": "OP", "text": "}"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "num"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "xrange"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "len"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "edge"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "edges"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "num"}, {"category": "OP", "text": "]"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "word"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "num"}, {"category": "OP", "text": "]"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "associations"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "graph"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "canonical_order"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "edge"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": "]"}, {"category": "OP", "text": "="}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "num"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "word"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Assign all of these to the object."}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "name"}, {"category": "NAME", "text": "in"}, {"category": "OP", "text": "("}, {"category": "STRING", "text": "'t1'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'t2'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'f1'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'f2'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'graph'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'associations'"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "__dict__"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "name"}, {"category": "OP", "text": "]"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "locals"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "name"}, {"category": "OP", "text": "]"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "generate_func"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "table"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "STRING", "text": "\"\"\"\n        Generates a random table based mini-hashing function.\n        \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Ensure that `self` isn't suddenly in the closure..."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "n"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "n"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "func"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "word"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "sum"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "x"}, {"category": "OP", "text": "*"}, {"category": "NAME", "text": "ord"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "c"}, {"category": "OP", "text": ")"}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "x"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "c"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "zip"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "table"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "word"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": "%"}, {"category": "NAME", "text": "n"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "func"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "assign"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# Create an vector of empty assignments."}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# **g is 1-indexed!**"}, {"category": "NL", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": "="}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "None"}, {"category": "OP", "text": "]"}, {"category": "OP", "text": "*"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "n"}, {"category": "OP", "text": "+"}, {"category": "NUMBER", "text": "1"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Assign all vertices."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "vertex"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "graph"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "vertices"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "assert"}, {"category": "NAME", "text": "isinstance"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "vertex"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "int"}, {"category": "OP", "text": ")"}, {"category": "NAME", "text": "and"}, {"category": "NAME", "text": "vertex"}, {"category": "OP", "text": "<="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "n"}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# This vertex has already been assigned."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "if"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "vertex"}, {"category": "OP", "text": "]"}, {"category": "NAME", "text": "is"}, {"category": "NAME", "text": "not"}, {"category": "NAME", "text": "None"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "                "}, {"category": "NAME", "text": "continue"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "vertex"}, {"category": "OP", "text": "]"}, {"category": "OP", "text": "="}, {"category": "NUMBER", "text": "0"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "assign_vertex"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "vertex"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "assign_vertex"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "vertex"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "neighbour"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "graph"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "neighbours"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "vertex"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "if"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "neighbour"}, {"category": "OP", "text": "]"}, {"category": "NAME", "text": "is"}, {"category": "NAME", "text": "not"}, {"category": "NAME", "text": "None"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# This neighbour has already been assigned."}, {"category": "NL", "text": "\n"}, {"category": "INDENT", "text": "                "}, {"category": "NAME", "text": "continue"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Get the associated edge number"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "edge"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "graph"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "canonical_order"}, {"category": "OP", "text": "("}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "vertex"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "neighbour"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "num"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "_word"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "associations"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "edge"}, {"category": "OP", "text": "]"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Assign this vertex such that"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# h(word) == g(vertex) + g(neighbour)"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "neighbour"}, {"category": "OP", "text": "]"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "num"}, {"category": "OP", "text": "-"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": "["}, {"category": "NAME", "text": "vertex"}, {"category": "OP", "text": "]"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "self"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "assign_vertex"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "neighbour"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "DEDENT", "text": ""}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "ordered_deduplicate"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "sequence"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "    "}, {"category": "STRING", "text": "\"\"\"\n    Returns the sequence as a tuple with the duplicates removed,\n    preserving input order.  Any duplicates following the first\n    occurrence are removed.\n\n    >>> ordered_deduplicate([1, 2, 3, 1, 32, 1, 2])\n    (1, 2, 3, 32)\n\n    Based on recipe from this StackOverflow post:\n    http://stackoverflow.com/a/480227\n    \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "seen"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "set"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# Micro optimization: each call to seen_add saves an extra attribute"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# lookup in most iterations of the loop."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "seen_add"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "seen"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "add"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "tuple"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "x"}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "x"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "sequence"}, {"category": "NAME", "text": "if"}, {"category": "NAME", "text": "not"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "x"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "seen"}, {"category": "NAME", "text": "or"}, {"category": "NAME", "text": "seen_add"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "x"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# API functions  ##############################################################"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "hash_parameters"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "minimize_indices"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "False"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "    "}, {"category": "STRING", "text": "\"\"\"\n    Gives hash parameters for the given set of words.\n\n    >>> info = hash_parameters('sun mon tue wed thu fri sat'.split())\n    >>> len(info.t1)\n    21\n    >>> len(info.t2)\n    21\n    >>> len(info.g) # g values are 1-indexed...\n    22\n    \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# Ensure that we have an indexable sequence."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "tuple"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Delegate to the hash builder."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "CzechHashBuilder"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "hash_info"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "make_hash"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ","}, {"category": "OP", "text": "*"}, {"category": "NAME", "text": "args"}, {"category": "OP", "text": ","}, {"category": "OP", "text": "**"}, {"category": "NAME", "text": "kwargs"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "    "}, {"category": "STRING", "text": "\"\"\"\n    Creates an ordered, minimal perfect hash function for the given sequence\n    of words.\n\n    >>> hf = make_hash(['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'])\n    >>> hf('fri')\n    5\n    >>> hf('sun')\n    0\n    \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Use the hash builder proper, because HashInfo is assumed to not"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# have the precious f1, and f2 attributes."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "info"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "CzechHashBuilder"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ","}, {"category": "OP", "text": "*"}, {"category": "NAME", "text": "args"}, {"category": "OP", "text": ","}, {"category": "OP", "text": "**"}, {"category": "NAME", "text": "kwargs"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "info"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "hash_function"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "make_dict"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "name"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ","}, {"category": "OP", "text": "*"}, {"category": "NAME", "text": "args"}, {"category": "OP", "text": ","}, {"category": "OP", "text": "**"}, {"category": "NAME", "text": "kwargs"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "    "}, {"category": "STRING", "text": "\"\"\"\n    make_dict(name, words, *args, **kwargs) -> mapping subclass\n\n    Takes a sequence of words (or a pre-built Czech HashInfo) and returns a\n    mapping subclass called `name` (used a dict) that employs the use of the\n    minimal perfect hash.\n\n    This mapping subclass has guaranteed O(1) worst-case lookups, additions,\n    and deletions, however is slower than dict() in practice.\n\n    >>> months = 'jan feb mar apr may jun jul aug sep oct nov dec'.split()\n    >>> MyDict = make_dict('MyDict', months)\n    >>> d = MyDict(dec=21, feb=None, may='hello')\n    >>> d['jul'] = False\n    >>> d\n    MyDict([('feb', None), ('may', 'hello'), ('jul', False), ('dec', 21)])\n    >>> del d['may']\n    >>> del d['apr']\n    Traceback (most recent call last):\n    ...\n    KeyError: 'apr'\n    >>> len(d)\n    3\n    \"\"\""}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "info"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "CzechHashBuilder"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ","}, {"category": "OP", "text": "*"}, {"category": "NAME", "text": "args"}, {"category": "OP", "text": ","}, {"category": "OP", "text": "**"}, {"category": "NAME", "text": "kwargs"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Create a docstring that at least describes where the class came from..."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "doc"}, {"category": "OP", "text": "="}, {"category": "STRING", "text": "\"\"\"\n        Dictionary-like object that uses minimal perfect hashing, perserving\n        original order. This class was generated by `%s.%s(%r, ...)`.\n        \"\"\""}, {"category": "OP", "text": "%"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "__name__"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "make_dict"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "__name__"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "name"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Delegate to create_dict."}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "create_dict_subclass"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "name"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "info"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "hash_function"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "info"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "doc"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "to_hash_info"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "    "}, {"category": "NAME", "text": "if"}, {"category": "NAME", "text": "isinstance"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "HashInfo"}, {"category": "OP", "text": ")"}, {"category": "NAME", "text": "or"}, {"category": "NAME", "text": "isinstance"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "CzechHashBuilder"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "COMMENT", "text": "# Unknown is a CzechHash."}, {"category": "NL", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "unknown"}, {"category": "NEWLINE", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "HashInfo"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "COMMENT", "text": "# Alternative method:"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "_exception_based"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "        "}, {"category": "NAME", "text": "try"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "t1"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "t2"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "f1"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "f2"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "except"}, {"category": "NAME", "text": "AttributeError"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "CreateCzechHash"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "try"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "attr"}, {"category": "NAME", "text": "in"}, {"category": "OP", "text": "("}, {"category": "STRING", "text": "'t1'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'t2'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'f1'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'f2'"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'g'"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "                "}, {"category": "NAME", "text": "iter"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "getattr"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "attr"}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "except"}, {"category": "NAME", "text": "TypeError"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "            "}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "CreateCzechHash"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "unknown"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "return"}, {"category": "NAME", "text": "unknown"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "def"}, {"category": "NAME", "text": "do_example"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "    "}, {"category": "NAME", "text": "import"}, {"category": "NAME", "text": "keyword"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "keyword"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "kwlist"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "hb"}, {"category": "OP", "text": "="}, {"category": "NAME", "text": "CzechHashBuilder"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "words"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "print"}, {"category": "STRING", "text": "'/*'"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "hb"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "t1"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "hb"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "t2"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "hb"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "g"}, {"category": "OP", "text": ","}, {"category": "STRING", "text": "'*/'"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NAME", "text": "print"}, {"category": "NAME", "text": "hb"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "graph"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "to_dot"}, {"category": "OP", "text": "("}, {"category": "NAME", "text": "edge_labels"}, {"category": "OP", "text": "="}, {"category": "OP", "text": "{"}, {"category": "NL", "text": "\n"}, {"category": "NAME", "text": "edge"}, {"category": "OP", "text": ":"}, {"category": "STRING", "text": "'%d: %s'"}, {"category": "OP", "text": "%"}, {"category": "NAME", "text": "assoc"}, {"category": "NAME", "text": "for"}, {"category": "NAME", "text": "edge"}, {"category": "OP", "text": ","}, {"category": "NAME", "text": "assoc"}, {"category": "NAME", "text": "in"}, {"category": "NAME", "text": "hb"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "associations"}, {"category": "OP", "text": "."}, {"category": "NAME", "text": "items"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "NL", "text": "\n"}, {"category": "OP", "text": "}"}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "NL", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "NAME", "text": "if"}, {"category": "NAME", "text": "__name__"}, {"category": "OP", "text": "=="}, {"category": "STRING", "text": "'__main__'"}, {"category": "OP", "text": ":"}, {"category": "NEWLINE", "text": "\n"}, {"category": "INDENT", "text": "    "}, {"category": "NAME", "text": "do_example"}, {"category": "OP", "text": "("}, {"category": "OP", "text": ")"}, {"category": "NEWLINE", "text": "\n"}, {"category": "DEDENT", "text": ""}, {"category": "ENDMARKER", "text": ""}]
